<!doctype html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Control ventas</title>
    <style>
        table{
            border: solid 1px black;
        }
        td{
            border: solid 1px black;
        }
    </style>
</head>
<body>

    <select id="selectorVendedores"></select>

    <table>
        <!-- Encabezado de la tabla -->
        <thead>
            <!-- Fila -->
            <tr>
                <!-- Celda -->
                <td>Vendedor</td>
                <td>Cliente</td>
                <td>Fecha</td>
                <td>Importe</td>
            </tr>
        </thead>
        <!-- Cuerpo de la tabla -->
        <tbody id="tablaVentas"></tbody>
    </table>

    <!-- si creamos una etiqueta js con src, no se pone código dentro de las etiquetas, porque lo ignorará.-->
    <script src="js/vendedores.js"></script>
    <script>
        VistaSelectorVendedores.preparar("selectorVendedores");
        ControladorVendedores.iniciar();
        VistaSelectorVendedores.selector.onchange = function () {
            ControladorVentas.modelo.filtrar('vendedor', this.value);
        }
    </script>


    <script src="js/ventas.js"></script>

    <script>
        VistaTablaVentas.preparar('tablaVentas');
        ControladorVentas.iniciar();
    </script>

    <script>

        /* YA NO SIRVE ---------------------------
        fetch('../api/v1.0/ventas').then(function (respuesta) {
            //console.log(respuesta);
            return respuesta.json();
        }).then(function (datosJson) {
            //console.log(datosJson);
            let tabla = document.getElementById('tablaVentas');

            datosJson.sort(function (a, b) {
                if(a.fecha < b.fecha) { return -1; }
                if(a.fecha > b.fecha) { return 1; }
                return 0;
            });

            let contador = 25;
            datosJson.forEach(function (venta) {
                contador--;
                if (contador <= 0)return;
                // Permite escribir código html entre sus etiquetas.
                tabla.innerHTML += `<tr>
                    <td>${venta.vendedor.apellidos}, ${venta.vendedor.nombre}</td>
                    <td>${venta.cliente.nombre}</td>
                    <td>${venta.fecha}</td>
                    <td>${venta.importe} €</td>
                </tr>`;
            })
        });
    */

    </script>

</body>
</html>